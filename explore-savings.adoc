---
sidebar: sidebar 
permalink: explore-savings.html 
keywords: cost, savings, compare costs, EBS, FSx for Windows File Server, SQL Server on-premises, on-premises, FSx for ONTAP 
summary: 比較使用 Amazon Elastic Block Store （ EBS ），適用於 Windows 檔案伺服器的 FSX ，以及使用適用於 ONTAP 儲存設備的 SQL Server 內部部署資料庫儲存設備的成本。 
---
= 探索NetApp Workload Factory for Databases 的節省
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
透過比較在 Amazon Elastic Block Store (EBS) 上使用 Microsoft SQL Server、FSx for Windows File Server 和本地儲存與 FSx for ONTAP儲存的成本，探索NetApp Workload Factory for Databases 為您的資料庫工作負載節省的成本。



== 關於這項工作

Workload Factory 有多種方法可供您探索在 Amazon Elastic Block Store (EBS)、FSx for Windows File Server 和本機儲存上執行的資料庫工作負載的節省情況 - 從儀表板、庫存標籤和探索節省標籤。在所有情況下，您都可以使用節省計算器來比較在 FSx for ONTAP檔案系統上執行 Microsoft SQL Server 工作負載的各種成本組成部分，例如儲存、運算、SQL 授權、快照和克隆，以及彈性區塊儲存 (EBS)、FSx for Windows File Server 和本機儲存。

如果 Workload Factory 確定您可以透過在 FSx for ONTAP檔案系統上執行這些工作負載來節省資金，則可以直接從 Workload Factory 控制台中的節省計算器透過 FSx for ONTAP部署 Microsoft SQL。當您在 Elastic Block Store、FSx for Windows File Server 或本機儲存上擁有多個 Microsoft SQL Server 執行個體時，我們建議使用具有單一 SQL 執行個體的 FSx for ONTAP配置。

.所有資料庫工作負載的潛在節約效益
存取 Workload Factory 控制台中的資料庫*儀表板*，以概覽在 FSx for ONTAP上執行所有資料庫工作負載的潛在成本節省。在「潛在節省」圖塊中，您可以查看 Elastic Block Store 和 FSx for Windows File Server 上的所有資料庫工作負載的數量、潛在的成本節省、節省百分比以及條形圖中的直覺表示。

image:screenshot-dashboard-potential-savings-tile.png["工作負載工廠控制台中資料庫儀表板的潛在節省圖塊的螢幕截圖。潛在節省圖塊顯示您在 Elastic Block Store 和 FSx for Windows File Server 上的所有資料庫工作負載的數量、潛在的成本節省、節省百分比以及條形圖中的直觀表示。"]

.節約計算機
您可以使用節約計算機，比較在 ONTAP 檔案系統的 FSX 上執行資料庫工作負載的各種成本元件，例如儲存，運算， SQL 授權，快照和複本，以及彈性區塊存放區（ EBS ），適用於 Windows 檔案伺服器的 FSX 和內部部署儲存設備。根據您的儲存需求、您可能會發現 ONTAP 檔案系統的 FSX 最符合資料庫工作負載的成本效益。

如果您使用適用於 ONTAP 檔案系統的 FSX ，計算機會顯示這些 Microsoft SQL Server 上資料庫工作負載的儲存設備是否會降低成本。<<計算機選項,瞭解如何使用計算機。>>

image:screenshot-ebs-savings-calculator-update.png["節約計算機頁面的螢幕擷取畫面會顯示左側 Amazon Elastic Block Store 組態上所選的 Microsoft SQL Server 、並提供自訂快照和複製值的選項。左側顯示的是在適用於 ONTAP 的 FSX 上使用 Microsoft SQL Server 和 Elastic Block Store 儲存設備的每月總成本、可節省美元金額和百分比。"]



== SQL Server 部署分析

此計算機會對 SQL Server 部署執行全方位分析，以確保所使用的資源和功能與 SQL Server 版本適當配對。以下是計算器建議降級至 Standard Edition 之前檢查的關鍵因素和條件：

.部署模式
計算機會評估部署模式，以及是否需要 Enterprise 版本。

.已分配資源
此計算機會評估下列授權相關分配資源的條件：

+ * 目標執行個體 vCPU：此執行個體具有 48 個或更少的虛擬 CPU。  * 記憶體分配：實例具有 128GB 或更少的記憶體。

.企業功能使用
計算機會驗證是否使用下列任何一項企業功能：

+ * 資料庫級企業功能 * 線上索引操作 * 資源調控器 * 點對點或 Oracle 複製 * R/Python 擴充 * 記憶體最佳化的 TempDB

如果評估的 SQL Server 執行個體未使用上述任何企業功能，且符合資源限制，則計算機會建議將授權降級為 Standard Edition 。本建議旨在協助您最佳化 SQL Server 授權成本，而不影響效能或功能。



== 計算機選項

有兩種計算機選項可供您比較系統與適用於 ONTAP 的 FSX 之間的成本—自訂和偵測。

透過自訂功能探索節約效益：您可以在 Amazon EC2 上提供適用於 Windows File Server 的 Microsoft SQL Server 組態設定、包括地區、部署模式、 SQL Server 版本、每月資料變更率、快照頻率等。

探索已偵測到的主機的節省：工作負載工廠連接到您現有的 Microsoft SQL 伺服器，並將詳細資訊提取到計算器中進行自動比較。您需要授予 _檢視、規劃和分析_ 權限才能使用此計算器選項。您可以變更使用場景，但所有其他細節都會在計算中自動確定。

此外，您還可以link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["新增 AWS 認證"^]提高計算機分析的準確度。選擇 * 根據現有資源計算節約 * 。系統會將您重新導向至「新增認證」頁面。新增認證之後，請選取要與適用於 ONTAP 的 FSX 比較的現有資源，然後選取 * 探索節約效益 * 。



=== 透過自訂功能探索節約效益

請依照儲存類型標籤下的步驟進行。

[role="tabbed-block"]
====
.Amazon彈性區塊儲存區（EBS）
--
.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 從資料庫中、選取 * 探索省錢 * 、然後選取 * Microsoft SQL Server on EBS * 。
. 在節約計算機中、提供下列詳細資料：
+
.. * 地區 * ：從下拉式功能表中選取地區。
.. * 部署模式 * ：從下拉式功能表中選取部署模式。
.. *SQL Server 版本 * ：從下拉式功能表中選取 SQL Server 版本。
.. * 每月資料變更率（ % ） * ：輸入每月平均複製和快照資料變更的百分比。
.. * Snapshot frequency * ：從下拉式功能表中選取快照頻率。
.. * 複製複本數 * ：在 EBS 組態中輸入複製複本的數量。
.. * 每月 SQL BYOL 成本（ $ ） * ：您也可以選擇輸入每月的 SQL BYOL 成本（以美元為單位）。
.. 根據 EC2 規格、請提供下列資訊：
+
*** * 機器說明 * ：您也可以輸入描述機器的名稱。
*** * 執行個體類型 * ：從下拉式功能表中選取 EC2 執行個體類型。


.. 在 Volume Types （卷類型）下，至少提供一個卷類型的以下詳細信息。IOPS 與處理量適用於特定磁碟類型的磁碟區。
+
*** * 磁碟區數量 *
*** * 每個 Volume 的儲存容量（ GiB ） *
*** * 每個磁碟區的已配置 IOPS *
*** * 傳輸量 Mb/s*


.. 如果您選擇了「隨時可用」部署模式、請提供 * 次要 EC2 規格 * 和 * Volume 類型 * 的詳細資料。




--
.Amazon FSX for Windows File Server
--
.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 從資料庫中、選取 * 探索省錢 * 、然後選取 * 在適用於 Windows* 的 FSX 上的 Microsoft SQL Server 。
. 在節約計算機中、提供下列詳細資料：
+
.. * 地區 * ：從下拉式功能表中選取地區。
.. * 部署模式 * ：從下拉式功能表中選取部署模式。
.. *SQL Server 版本 * ：從下拉式功能表中選取 SQL Server 版本。
.. * 每月資料變更率（ % ） * ：輸入每月平均複製和快照資料變更的百分比。
.. * Snapshot frequency * ：從下拉式功能表中選取快照頻率。
.. * 複製複本數 * ：在 EBS 組態中輸入複製複本的數量。
.. * 每月 SQL BYOL 成本（ $ ） * ：您也可以選擇輸入每月的 SQL BYOL 成本（以美元為單位）。
.. 在適用於 Windows 檔案伺服器的 FSX 設定下、提供下列項目：
+
*** * 部署類型 * ：從下拉式功能表中選取部署類型。
*** * 儲存類型 * ： SSD 儲存設備是支援的儲存類型。
*** * 總儲存容量 * ：輸入儲存容量、然後選取組態的容量單位。
*** * 已配置的 SSD IOP* ：輸入配置的 SSD IOPS 。
*** * 處理量（ MB/s ） * ：以 MB/s 為單位輸入處理量


.. 在 EC2 規格下、從下拉式功能表中選取 * 執行個體類型 * 。




--
====
在您提供資料庫主機組態的詳細資料之後，請檢閱頁面上提供的計算和建議。

此外，請向下捲動至頁面底部，選取下列其中一項以檢視報告：

* * 匯出 PDF*
* * 以電子郵件傳送 *
* * 檢視計算 *


若要切換至適用於 ONTAP 的 FSX 、請遵循的指示 <<使用適用於 ONTAP 的 FSX 在 AWS EC2 上部署 Microsoft SQL Server,使用適用於 ONTAP 檔案系統的 FSX 在 AQS EC2 上部署 Microsoft SQL Server>>進行。



=== 探索偵測到的主機的節約效益

Workload Factory 輸入偵測到的 Elastic Block Store 和 FSx for Windows File Server 主機特性，以便您可以自動探索節省。

.開始之前
開始之前、請先完成下列先決條件：

* link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["授予查看、規劃和分析權限"^] 在您的 AWS 帳戶中，在「探索節省」標籤下偵測 Elastic Block Store (EBS) 和 FSx for Windows 系統，並在節省計算器中顯示節省計算結果。
* 若要取得實例類型建議並提高成本準確性，請執行下列操作：
+
.. 授予 Amazon CloudWatch 和 AWS Compute Optimizer 權限。
+
... 登入AWS管理控制台並開啟IAM服務。
... 編輯 IAM 角色的策略。複製並新增以下 Amazon CloudWatch 和 AWS Compute Optimizer 權限。
+
[source, json]
----
{
"Version": "2012-10-17",
"Statement": [
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEnrollmentStatus",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:PutRecommendationPreferences",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEffectiveRecommendationPreferences",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEC2InstanceRecommendations",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "autoscaling:DescribeAutoScalingGroups",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "autoscaling:DescribeAutoScalingInstances",
   "Resource": "*"
  }
]
}
----


.. 選擇將可計費 AWS 帳戶加入 AWS Compute Optimizer。




請依照儲存類型標籤下的步驟進行。

[role="tabbed-block"]
====
.Amazon彈性區塊儲存區（EBS）
--
.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在資料庫磁貼中，從選單中選擇 *探索節省*，然後選擇 *FSx for Windows 上的 Microsoft SQL Server*。
+
如果 Workload Factory 偵測到 EBS 主機，您將被重新導向到「探索節省」標籤。如果 Workload Factory 未偵測到 EBS 主機，您將被重新導向到計算器<<透過自訂功能探索節約效益,透過自訂功能探索節約效益>>。

. 從「探索節省」中，選擇一個或多個在 EBS 上執行的資料庫主機，然後選擇「探索節省」。
. 如果需要，請使用 SQL Server 憑證、Windows 憑證或新增缺少的 SQL Server 權限來驗證資料庫主機。
+
如果身份驗證成功後「探索節省」頁面未載入數據，請選擇「*庫存*」標籤重新載入數據，然後再次選擇「探索節省」標籤。

. 在節約計算機中（可選）提供以下有關 EBS 存儲中克隆和快照的詳細信息，以獲得更準確的成本節約估算。
+
.. *快照頻率*：從選單中選擇快照頻率。
.. *克隆刷新頻率*：從選單中選擇克隆刷新的頻率。
.. * 複製複本數 * ：在 EBS 組態中輸入複製複本的數量。
.. * 每月變更率 * ：輸入每月平均複製資料和快照資料變更的百分比。
.. *新增主機*：您可以選擇最多五個偵測到的 EBS 主機，將其包含在節省運算中。
+
Workload Factory 將多個 SQL Server 主機合併到單一 FSx for ONTAP設定建議中，以最佳化成本節約，除非所選 EBS 主機超過單一 FSx for ONTAP檔案系統的吞吐量、容量或 IOPS 限制。





--
.Amazon FSX for Windows File Server
--
.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在資料庫磁貼中，從選單中選擇 *探索節省*，然後選擇 *FSx for Windows 上的 Microsoft SQL Server*。
+
如果 Workload Factory 偵測到適用於 Windows 主機的 FSx，您將被重新導向到「探索節省」標籤。如果 Workload Factory 未偵測到 FSx for Windows 主機，您將被重新導向到計算器<<透過自訂功能探索節約效益,透過自訂功能探索節約效益>>。

. 在「探索節省」標籤中，選擇使用 FSx for Windows File Server 儲存的資料庫主機的「探索節省」*。
. 如果需要，請使用 SQL Server 憑證、Windows 憑證或新增缺少的 SQL Server 權限來驗證資料庫主機。
+
如果身份驗證成功後「探索節省」頁面未載入數據，請選擇「*庫存*」標籤重新載入數據，然後再次選擇「探索節省」標籤。

. 在節約計算機中（可選）提供有關適用於 Windows 儲存設備的 FSX 中的克隆（陰影複製）和快照的下列詳細資料、以獲得更準確的成本節約預估。
+
.. *快照頻率*：從選單中選擇快照頻率。
+
如果偵測到適用於 Windows 的 FSX 陰影複製、則預設值為 * 每日 * 。如果未偵測到陰影複製、預設值為 * 無快照頻率 * 。

.. *克隆刷新頻率*：從選單中選擇克隆刷新的頻率。
.. * 複製複本數 * ：在適用於 Windows 的 FSX 組態中輸入複製複本的數量。
.. * 每月變更率 * ：輸入每月平均複製資料和快照資料變更的百分比。




--
.Microsoft SQL Server 內部部署
--
.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在資料庫磁貼中，從選單中選擇 *探索節省*，然後選擇 *本機 Microsoft SQL Server*。
. 從 SQL Server 內部部署索引標籤下載指令碼，以評估內部部署 SQL Server 環境。
+
.. 下載評估腳本。該腳本是一個基於PowerShell的資料收集工具。它收集 SQL Server 配置和效能數據，然後上傳到 Workload Factory。遷移顧問會評估資料並為您的 SQL Server 環境規劃 FSx for ONTAP部署。
+
image:screenshot-download-script-on-premises.png["SQL Server 內部部署索引標籤的螢幕擷取畫面會顯示下載評估指令碼的選項。"]

.. 在 SQL Server 主機上執行指令碼。
.. 在 Workload Factory 中的 SQL Server 本機標籤中上傳腳本輸出。
+
image:screenshot-upload-script-on-premises.png["SQL Server 內部部署索引標籤的螢幕擷取畫面會顯示上傳評估指令碼的選項。"]



. 從 SQL Server 內部部署索引標籤中，選取 * 探索節約 * ，以執行 SQL Server 內部部署主機與適用於 ONTAP 的 FSX 的成本分析。
. 在節約計算機中，選取內部部署主機的區域。
. 如需更準確的結果，請更新運算資訊，儲存設備和效能詳細資料。
. 您也可以選擇提供內部部署資料庫環境中的複本（陰影複製）和快照的下列詳細資料，以獲得更準確的成本節約預估。
+
.. *快照頻率*：從選單中選擇快照頻率。
+
如果偵測到適用於 Windows 的 FSX 陰影複製、則預設值為 * 每日 * 。如果未偵測到陰影複製、預設值為 * 無快照頻率 * 。

.. *克隆刷新頻率*：從選單中選擇克隆刷新的頻率。
.. * 複製複本數 * ：在內部部署組態中輸入複製複本的數量。
.. * 每月變更率 * ：輸入每月平均複製資料和快照資料變更的百分比。




--
====
在您提供資料庫主機組態的詳細資料之後，請檢閱頁面上提供的計算和建議。

此外，請向下捲動至頁面底部，選取下列其中一項以檢視報告：

* * 匯出 PDF*
* * 以電子郵件傳送 *
* * 檢視計算 *


若要切換至適用於 ONTAP 的 FSX 、請遵循的指示 <<使用適用於 ONTAP 的 FSX 在 AWS EC2 上部署 Microsoft SQL Server,使用適用於 ONTAP 檔案系統的 FSX 在 AQS EC2 上部署 Microsoft SQL Server>>進行。

.內部部署主機移除
在您了解了 Microsoft SQL 伺服器本機的節省情況後，您可以選擇從 Workload Factory 中刪除本機主機記錄。選擇 Microsoft SQL Server 本機的操作選單，然後選擇*刪除*。



== 使用適用於 ONTAP 的 FSX 在 AWS EC2 上部署 Microsoft SQL Server

如果您想要切換至 FSX for ONTAP 以節省成本、請按一下 * 建立 * 、直接從「建立新的 Microsoft SQL 伺服器」精靈建立建議的組態、或按一下 * 儲存 * 來儲存建議的組態以供稍後使用。


NOTE: Workload Factory 不支援儲存或建立多個 FSx for ONTAP檔案系統。

.部署方法
擁有_資料庫主機建立權限_後，您可以直接從 Workload Factory 使用 FSx for ONTAP在 AWS EC2 上部署新的 Microsoft SQL 伺服器。您也可以從程式碼框視窗複製內容，並使用程式碼框方法之一部署建議的配置。

即使沒有權限，您也可以從 Codebox 視窗複製內容，並使用 Codebox 方法之一部署建議的設定。

.相關資訊
link:https://docs.netapp.com/us-en/workload-setup-admin/permissions-reference.html["Workload Factory 權限參考"^]
