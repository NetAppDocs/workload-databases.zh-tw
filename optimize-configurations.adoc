---
sidebar: sidebar 
permalink: optimize-configurations.html 
keywords: optimize, configuration, storage, compute, application, resiliency assessment, scan, optimization, Microsoft SQL Server, host, instance, FSx for ONTAP 
summary: 資料庫工作負載工廠掃描 Microsoft SQL Server 配置，提供見解和建議，協助您實現卓越營運。 
---
= 在工作負載工廠中實現架構良好的資料庫配置
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
使用配置分析洞察和建議，利用工作負載工廠使用 Microsoft SQL Server 和 Oracle 為您的資料庫配置實施最佳實務。您可以輕鬆查看架構良好的狀態，了解資料庫配置的問題，並採取措施改善任何未針對可靠性、安全性、效率、效能和成本進行最佳化的配置。

您也可以忽略不適用於您的環境的特定配置的分析，以避免不必要的警報和不準確的最佳化結果。

link:optimize-overview.html["了解工作負載工廠中的配置分析和良好架構狀態。"]



== 關於這項工作

工作負載工廠每日分析資料庫配置。每日分析提供精心設計的狀態、見解和建議，以及自動修復配置問題的選項，以便您的配置符合最佳實踐。

您可以選擇查看配置問題的建議並從工作負載工廠控制台內的資料庫清單中修復這些問題。

.分析內容
工作負載工廠分析以下配置的良好架構狀態：

對於 Microsoft SQL Server 執行個體：

* 儲存規模：包括儲存層、檔案系統保留空間、記錄磁碟機大小及 TempDB 磁碟機大小
* 儲存配置：包括使用者資料檔案放置、記錄檔放置及 TempDB 放置
* 儲存配置：包含容量管理、精簡配置、分層策略、快照、Microsoft 多路徑 I/O (MPIO) 狀態和 MPIO 逾時設置
* 計算：包括調整大小、作業系統修補程式和網路適配器設置，如接收方縮放 (RSS)、TCP 卸載和 MTU 對齊
* 應用程式：包括 Microsoft SQL Server 授權， Microsoft SQL Server 修補程式和 MAXDOP 設定
* 彈性：包含本機快照、FSx for ONTAP備份、跨區域複製 (CRR) 和 Microsoft SQL 高可用性。
* 克隆：包括刷新和刪除在工作負載工廠內部或外部創建的超過 60 天的克隆（沙盒）的選項


對於 Oracle 資料庫：

* 儲存配置：包含容量管理、精簡配置、分層策略、快照和儲存效率




== 開始之前

* 你必須有link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["AWS 帳戶憑證和讀取/寫入權限"^]分析您的資料庫配置。
* 若要評估 Microsoft SQL Server 執行個體或 Oracle 資料庫的存儲，必須在工作負載工廠中註冊資源，且儲存類型必須是 FSx for ONTAP。link:register-instance.html["了解如何註冊資源。"]
* 在選擇修正設定或組態之前，請務必仔細檢閱每項建議。對於 RSS 和 MAXDOP 設定，我們建議您先測試建議的設定，以判斷效能改善，然後再變更正式作業環境。



NOTE: 補救程序可能會導致執行個體停機或服務中斷。在選擇修復配置之前，請務必仔細查看建議。



== 修復配置問題

修正在 FSx for ONTAP儲存上執行的 SQL Server 或 Oracle 環境的設定問題。


NOTE: 修復過程可能會導致執行個體停機或服務中斷。在選擇修復配置問題之前，請務必仔細查看建議。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 在 *Inventory （清單） * 選項卡中，選擇 *Instancs* 選項卡。
. 選擇“修復問題”以查看實例的配置問題。
. 在實例的「良好架構狀態」頁面上，查看分析結果。
+
您可以按類別、子類別、狀態、嚴重性和標籤過濾配置問題。

+
您也可以選擇「匯出 PDF」下載調查結果報告。

. 選取下拉式箭頭以檢視任何組態的建議。建議包括最佳實踐、未優化配置的潛在缺陷以及重要注意事項。請務必仔細檢閱建議內容。
. 當選項可用時，選擇“查看並修復”配置問題。
+
*全選*是預設設置，但您可以選擇特定資源進行修復。

+
.. 對於除克隆清理之外的所有配置，請查看建議詳細資訊以了解如果選擇修復問題會發生什麼。某些修復操作可能會導致執行個體停機或服務中斷。
.. 若要清除複本，請選取要重新整理或刪除的複製資料庫（沙箱）。
+
*** 重新整理複本會將其與來源資料庫同步。只有在工作負載工廠中建立的複本才能使用重新整理功能。
*** 刪除複本會永久移除複本，釋出儲存空間並降低成本。您可以刪除在工作負載工廠內外建立的複本。




. 選取 * 繼續 * 以修正組態問題。


.結果
工作負載工廠開始修復問題。選取 * 工作監控 * 標籤以檢視作業狀態。



== 延遲或關閉資料庫組態分析

延遲或關閉不適用於資料庫環境的特定資料庫組態分析，以避免不必要的警示和不正確的最佳化結果。您可以隨時重新啟動延遲或關閉的組態分析。

資料庫組態的應用程式需求會有所不同。工作負載工廠提供兩個選項，可略過分析特定資料庫組態，以便您只監控相關問題，並準確檢視相關組態的健全狀況。當特定組態分析被延遲或關閉時，組態不會納入整體最佳化分數中。

您可以在配置層級、SQL Server 執行個體或 Oracle 資料庫層級延後、解除和重新啟動組態分析。

* * 延遲 30 天 * ：延遲分析將停止分析 30 天。30 天後，分析將自動重新啟動。
* * 關閉 * ：取消分析會無限期地延後分析。您可以視需要重新啟動分析。


以下說明說明如何在配置層級延後、解除或重新啟動分析。若要針對特定 SQL Server 執行個體或 Oracle 資料庫完成下列任務，請從 *儀表板* 標籤開始。

[role="tabbed-block"]
====
.延後
--
延後 30 天內停止組態分析。30 天後，分析將自動重新啟動。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 在 *Inventory （清單） * 選項卡中，向下滾動至要延遲的配置，選擇三點菜單，然後選擇 *postpone for 30 days * （延遲 30 天）。
. 選擇*繼續*。


.結果
組態分析會停止 30 天。

--
.關閉
--
關閉以無限期停止組態分析。您可以視需要重新啟動分析。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 在 *Inventory （資源清冊） * 選項卡中，向下滾動至要關閉的配置，選擇三點菜單，然後選擇 *Dismi* （關閉）。
. 選擇*繼續*。


.結果
組態分析會停止。

--
.重新啟動
--
隨時重新啟動延遲或關閉的組態分析。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 在 * 詳細目錄 * 標籤中，向下捲動至要重新啟動的組態，選取三點選單，然後選取 * 重新啟動 * 。
. 選擇*繼續*。


.結果
組態分析會重新啟動，並每天持續進行。

--
====