---
sidebar: sidebar 
permalink: optimize-configurations.html 
keywords: optimize, configuration, storage, compute, application, resiliency assessment, scan, optimization, Microsoft SQL Server, host, instance, FSx for ONTAP 
summary: NetApp Workload Factory for Databases 掃描 Microsoft SQL Server 配置，提供見解和建議，協助您實現卓越營運。 
---
= 在 Workload Factory 中實作架構良好的資料庫配置
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
使用配置分析見解和建議，利用NetApp Workload Factory 為使用 Microsoft SQL Server 和 Oracle 的資料庫配置實作最佳實務。您可以輕鬆查看架構良好的狀態，了解資料庫配置的問題，並採取措施改善任何未針對可靠性、安全性、效率、效能和成本進行最佳化的配置。

您也可以忽略不適用於您的環境的特定配置的分析，以避免不必要的警報和不準確的最佳化結果。

link:optimize-overview.html["了解 Workload Factory 中的配置分析和良好架構狀態。"]



== 關於這項工作

Workload Factory 每天分析資料庫配置。每日分析提供精心設計的狀態、見解和建議，以及自動修復配置問題的選項，以便您的配置符合最佳實踐。

您可以選擇查看配置問題的建議並從 Workload Factory 控制台內的資料庫清單中修復這些問題。

.分析內容
Workload Factory 分析以下配置的良好架構狀態：

對於 Microsoft SQL Server 執行個體：

* 儲存規模：包括儲存層、檔案系統保留空間、記錄磁碟機大小及 TempDB 磁碟機大小
* 儲存配置：包括使用者資料檔案放置、記錄檔放置及 TempDB 放置
* 儲存配置：包含容量管理、精簡配置、分層策略、快照、Microsoft 多路徑 I/O (MPIO) 狀態和 MPIO 逾時設置
* 計算：包括調整大小、作業系統修補程式和網路適配器設置，如接收方縮放 (RSS)、TCP 卸載和 MTU 對齊
* 應用程式：包括 Microsoft SQL Server 授權， Microsoft SQL Server 修補程式和 MAXDOP 設定
* 彈性：包含本機快照、FSx for ONTAP備份、跨區域複製 (CRR) 和 Microsoft SQL 高可用性。
* 克隆：包括刷新和刪除在 Workload Factory 內部或外部創建的超過 60 天的克隆（沙盒）的選項


對於 Oracle 資料庫：

* 儲存配置：包括容量管理、精簡配置、分層策略、快照、儲存效率以及使用 iSCSI 部署的作業系統配置（帶或不帶自動儲存管理 (ASM)），包括 Microsoft 多路徑 I/O (MPIO) 狀態和設定
* 儲存佈局：包括重做日誌放置、臨時表空間放置、資料檔案放置、存檔日誌放置、控製檔案放置和二進位檔案放置、ASM 磁碟組 LUN 數量




== 開始之前

* 你必須有link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["AWS 帳戶憑證和讀取/寫入權限"^]分析您的資料庫配置。
* 若要評估 Microsoft SQL Server 執行個體或 Oracle 資料庫的存儲，必須在 Workload Factory 中註冊資源，且儲存類型必須是 FSx for ONTAP。link:register-instance.html["了解如何註冊資源。"]
* 在選擇修正設定或組態之前，請務必仔細檢閱每項建議。對於 RSS 和 MAXDOP 設定，我們建議您先測試建議的設定，以判斷效能改善，然後再變更正式作業環境。



NOTE: 補救程序可能會導致執行個體停機或服務中斷。在選擇修復配置之前，請務必仔細查看建議。



== 修復配置問題

修正在 FSx for ONTAP儲存上執行的 SQL Server 或 Oracle 環境的設定問題。


NOTE: 修復過程可能會導致執行個體停機或服務中斷。在選擇修復配置問題之前，請務必仔細查看建議。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 在*庫存*中，選擇引擎類型：Microsoft SQL Server 或 Oracle。
. 選擇要修復特定配置的資源。
+
** 如果選擇了 Microsoft SQL Server，請選擇「*實例*」標籤。
** 如果您選擇了 Oracle，請選擇「*資料庫*」標籤。


. 選擇“查看並修復”以查看實例的配置問題。
. 在實例的「良好架構狀態」頁面上，查看分析結果。
+
您可以按類別、子類別、狀態、嚴重性和標籤過濾配置問題。

+
您也可以選擇「匯出 PDF」下載調查結果報告。

. 選取下拉式箭頭以檢視任何組態的建議。建議包括最佳實踐、未優化配置的潛在缺陷以及重要注意事項。請務必仔細檢閱建議內容。
. 當選項可用時，選擇“查看並修復”配置問題。
+
*全選*是預設設置，但您可以選擇特定資源進行修復。

+
.. 對於除克隆清理之外的所有配置，請查看建議詳細資訊以了解如果選擇修復問題會發生什麼。某些修復操作可能會導致執行個體停機或服務中斷。
.. 若要清除複本，請選取要重新整理或刪除的複製資料庫（沙箱）。
+
*** 刷新克隆會使其與來源資料庫同步。刷新僅適用於在 Workload Factory 中建立的克隆。
*** 刪除克隆會將其永久刪除，釋放儲存空間並降低成本。您可以刪除在 Workload Factory 內部和外部建立的克隆。




. 選取 * 繼續 * 以修正組態問題。


.結果
Workload Factory 開始修復問題。選擇「作業監控」標籤來查看操作的狀態。



== 延遲或關閉資料庫組態分析

延遲或關閉不適用於資料庫環境的特定資料庫組態分析，以避免不必要的警示和不正確的最佳化結果。您可以隨時重新啟動延遲或關閉的組態分析。

應用程式對資料庫配置的要求各不相同。 Workload Factory 為您提供了兩個跳過特定資料庫配置分析的選項，以便您可以只監控相關問題並準確了解相關配置的健康狀況。當特定配置分析被推遲或取消時，該配置將不包含在總最佳化分數中。

您可以在配置層級、SQL Server 執行個體或 Oracle 資料庫層級延後、解除和重新啟動組態分析。

* * 延遲 30 天 * ：延遲分析將停止分析 30 天。30 天後，分析將自動重新啟動。
* * 關閉 * ：取消分析會無限期地延後分析。您可以視需要重新啟動分析。


以下說明說明如何在配置層級延後、解除或重新啟動分析。若要針對特定 SQL Server 執行個體或 Oracle 資料庫完成下列任務，請從 *儀表板* 標籤開始。

[role="tabbed-block"]
====
.延後
--
延後 30 天內停止組態分析。30 天後，分析將自動重新啟動。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 從資料庫選單中，選擇*Inventory*。
. 在清單中，選擇資料庫引擎類型：*Microsoft SQL Server* 或 *Oracle*。
. 導覽至要延後配置的 SQL Server 執行個體或 Oracle 資料庫，選擇操作選單，然後選擇 *Well-architected*。
. 在 Well-architected 分析頁面上，向下捲動到要延遲的配置，選擇操作選單，然後選擇 *Dismiss*。
. 在“解除”設定對話框中，選擇“延遲 30 天”，然後選擇“解除”。


.結果
組態分析會停止 30 天。

--
.關閉
--
關閉以無限期停止組態分析。您可以視需要重新啟動分析。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 從資料庫選單中，選擇*Inventory*。
. 在清單中，選擇資料庫引擎類型：*Microsoft SQL Server* 或 *Oracle*。
. 導覽至要延後配置的 SQL Server 執行個體或 Oracle 資料庫，選擇操作選單，然後選擇 *Well-architected*。
. 在 Well-architected 分析頁面上，向下捲動到要延遲的配置，選擇操作選單，然後選擇 *Dismiss*。
. 在 Dismiss 設定對話方塊中，選擇 *Dismiss* 選項，然後選擇 *Dismiss* 確認關閉。


.結果
組態分析會停止。

--
.重新啟動
--
隨時重新啟動延遲或關閉的組態分析。

.步驟
. 使用其中一項登link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^]入。
. 在「資料庫」方塊中、選取 * 前往資料庫庫存 * 。
. 從資料庫選單中，選擇*Inventory*。
. 在清單中，選擇資料庫引擎類型：*Microsoft SQL Server* 或 *Oracle*。
. 導覽至要延後配置的 SQL Server 執行個體或 Oracle 資料庫，選擇操作選單，然後選擇 *Well-architected*。
. 在 Well-architected 分析頁面上，選擇 *Dismissed configuration* 以僅顯示已解除的設定。
. 選擇*重新啟動*以重新啟動已延遲或已取消的配置的配置分析。


.結果
組態分析會重新啟動，並每天持續進行。

--
====